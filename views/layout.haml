!!! 5
%html
  %head
    %meta{ "http-equiv" => "content-type", "content" => "text/html; charset=utf-8" }
    - if @description
      %meta{ "name" => "description", "content" => @description }
    - if @keywords
      %meta{ "name" => "keywords", "content" => @keywords }
    %title= @title

    %link{ :href => "http://yui.yahooapis.com/3.0.0/build/cssreset/reset-min.css", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "http://yui.yahooapis.com/3.0.0/build/cssfonts/fonts-min.css", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/stylesheets/thesuper.css", :media => "screen", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/stylesheets/carousel.css", :media => "screen", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/articles.xml", :rel => "alternate", :type => "application/atom+xml" }
    
    %script{:src => "/javascripts/cufon-yui.js", :type => "text/javascript"}
    %script{:src => "/fonts/berling_400-berling_italic_400.font.js", :type => "text/javascript"}
    %script{:src => "/fonts/avenir_400-avenir_oblique_400.font.js", :type => "text/javascript"}
    %script{:src => "/fonts/helvetica-neue_400.font.js", :type => "text/javascript"}
    
    - if production?
      %script{:src => "/javascripts/ext-3.1.1/adapter/ext/ext-base.js", :type => "text/javascript"}
      %script{:src => "/javascripts/ext-3.1.1/ext-all.js", :type => "text/javascript"}
    - else
      %script{:src => "/javascripts/ext-3.1.1/adapter/ext/ext-base-debug.js", :type => "text/javascript"}
      %script{:src => "/javascripts/ext-3.1.1/ext-all-debug.js", :type => "text/javascript"}
    
    / YUI Browser History Manager 
    %script{:src => "http://yui.yahooapis.com/combo?2.8.0r4/build/yahoo/yahoo-min.js&2.8.0r4/build/event/event-min.js&2.8.0r4/build/history/history-min.js", :type => "text/javascript"}

    / TSF Site scripts
    %script{:src => "/javascripts/site/slides.js", :type => "text/javascript"}
    %script{:src => "/javascripts/site/home_slides.js", :type => "text/javascript"}
    %script{:src => "/javascripts/site/process_slides.js", :type => "text/javascript"}
    %script{:src => "/javascripts/site/work_slides.js", :type => "text/javascript"}
    %script{:src => "/javascripts/site/feed.js", :type => "text/javascript"}
    %script{:src => "/javascripts/carousel.js", :type => "text/javascript"}
    %script{:src => "/javascripts/thesuper.js", :type => "text/javascript"}
    
  %body{ :id => 'body', :class => @body_class }
    :javascript
      if (Ext.isIE) {
        var dh = Ext.DomHelper;
        dh.append('body', {tag: 'iframe', id: 'x-history-frame', src: '/images/empty.gif'});
      }    
    %input{:id => "x-history-field", :type => "hidden"}
    
    .site-wrapper
      #hd
        =haml :header, :layout => false
      
      #bd
        = yield

      #ft
        =haml :footer, :layout => false

    = haml :analytics, :layout => false
